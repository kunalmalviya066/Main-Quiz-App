<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Practice Quiz — Light Pink</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <img src="" alt="" id="logo" style="display:none"/>
        <h1>Practice Quiz</h1>
      </div>
      <nav class="nav">
        <button class="nav-btn" data-view="home">Home</button>
        <button class="nav-btn" id="nav-subjects" data-view="subjects">Subjects</button>
        <button class="nav-btn" id="nav-daily" data-action="daily">Daily Quiz</button>
        <button class="nav-btn" data-view="custom">Full Mock</button>
        <button class="nav-btn" id="nav-help" data-view="help">Help</button>
        <button class="nav-btn" id="nav-history" data-view="history">History</button>
      </nav>
    </div>
  </header>

  <main class="container main">
    <!-- Home / Hero -->
    <section id="view-home" class="view active">
      <div class="hero card">
        <h2>Start practicing — pick a subject and dive in</h2>
        <p>Fast daily quizzes, custom mocks, and topic-wise practice — all stored locally in your browser.</p>
        <div class="hero-ctas">
          <button id="start-practice" class="btn primary">Start Practice</button>
          <button id="daily-quick" class="btn">Take Daily Quiz</button>
        </div>
      </div>

      <div class="grid" id="featured-subjects"></div>
    </section>

    <!-- Subjects / Topic selection -->
    <section id="view-subjects" class="view">
      <div class="card">
        <h2>Select Subjects & Topics</h2>
        <div id="subjects-list" class="subjects-grid"></div>

        <div id="topics-area" style="display:none;">
          <h3>Topics (pick one or more)</h3>
          <div id="topics-list" class="topics-grid"></div>

          <div class="form-row">
            <label>Number of Questions
              <input type="number" id="num-questions" min="1" max="500" value="10"/>
            </label>
            <label>Timer (minutes, optional)
              <input type="number" id="timer-min" min="0" value="0"/>
            </label>
          </div>

          <div class="form-row">
            <label><input type="checkbox" id="shuffle-choices" checked/> Shuffle choices</label>
            <label><input type="checkbox" id="anti-cheat" checked/> Enable anti-cheat (best-effort)</label>
          </div>

          <div class="form-row">
            <button id="btn-start-quiz" class="btn primary">Start Quiz</button>
            <button id="btn-back-home" class="btn">Back</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Custom mock -->
    <section id="view-custom" class="view">
      <div class="card">
        <h2>Build a Custom Test</h2>
        <div class="form-row">
          <label>Select Subjects (multiple)
            <select id="custom-subjects" multiple size="4" style="min-width:220px"></select>
          </label>
          <label>Number of Questions
            <input type="number" id="custom-num" min="1" max="500" value="20"/>
          </label>
          <label>Timer (minutes)
            <input type="number" id="custom-timer" min="0" value="30"/>
          </label>
        </div>
        <div class="form-row">
          <button id="btn-start-custom" class="btn primary">Start Mock</button>
          <button class="btn" data-view="home">Cancel</button>
        </div>
      </div>
    </section>

    <!-- Quiz Runner -->
    <section id="view-quiz" class="view">
      <div class="quiz-shell">
        <aside class="quiz-side">
          <div class="card">
            <div class="quiz-hud">
              <div><strong>Q</strong> <span id="hud-qnum">0</span>/<span id="hud-total">0</span></div>
              <div id="hud-timer">--:--</div>
              <div id="hud-time-taken">Time: 0s</div>
            </div>

            <div class="controls">
              <button id="btn-prev" class="btn">Prev</button>
              <button id="btn-next" class="btn">Next</button>
              <button id="btn-mark" class="btn">Mark</button>
            </div>

            <div class="navigator card small">
              <h4>Navigator</h4>
              <div id="navigator-grid" class="nav-grid"></div>
            </div>

            <div class="card small">
              <button id="btn-pause" class="btn">Pause</button>
              <button id="btn-fullscreen" class="btn">Fullscreen</button>
              <button id="btn-submit" class="btn primary">Submit</button>
            </div>
          </div>
        </aside>

        <main class="quiz-main card">
          <div id="question-area">
            <div id="question-meta" class="muted">Subject: <span id="q-subject"></span> — Topic: <span id="q-topic"></span></div>
            <h3 id="question-text"></h3>
            <div id="question-image" class="question-image"></div>

            <div id="choices" class="choices"></div>
          </div>
        </main>
      </div>
    </section>

    <!-- Results -->
    <section id="view-results" class="view">
      <div class="card">
        <h2>Results</h2>
        <div id="results-summary" class="results-summary"></div>

        <div id="review-list"></div>

        <div class="form-row">
          <button id="btn-review-home" class="btn primary">Back to Home</button>
          <button id="btn-download-history" class="btn">Export History (JSON)</button>
        </div>
      </div>
    </section>

    <!-- Help -->
    <section id="view-help" class="view">
      <div class="card">
        <h2>Help & Notes</h2>
        <p>This app stores everything locally in your browser. Clearing storage will erase data.</p>
        <ul>
          <li>Daily quiz refreshes once per calendar day and picks 10 random questions.</li>
          <li>Anti-cheat is best-effort (client-side) — it disables right-click/copy and pauses on tab switch if enabled.</li>
          <li>Images in questions can be URLs or data URLs (base64).</li>
        </ul>
      </div>
    </section>

    <!-- History -->
    <section id="view-history" class="view">
      <div class="card">
        <h2>Test History</h2>
        <div id="history-list"></div>
        <div class="form-row">
          <button id="btn-clear-history" class="btn">Clear History</button>
          <button id="btn-export-history" class="btn">Export History (JSON)</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>Practice Quiz • Local-only • Light pink theme</p>
    </div>
  </footer>

  <script src="utils.js"></script>
  <script src="db.js"></script>
  <script src="script.js"></script>
</body>
</html>
